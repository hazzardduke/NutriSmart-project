<div class="register-wrapper">
  <div class="register-card">
    <h2>Crear cuenta</h2>
    <p>Por favor completa el siguiente formulario</p>

    <form #registroForm="ngForm" (ngSubmit)="registrar(registroForm)" novalidate>
      <label for="cedula">Cédula</label>
      <input type="text" id="cedula" name="cedula" [(ngModel)]="form.cedula" #cedula="ngModel"
        required pattern="^[0-9]{9}$" maxlength="9" minlength="9" (input)="soloNumeros($event)" />
      <div *ngIf="cedula.invalid && cedula.touched" class="error">
        <small *ngIf="cedula.errors?.['required']">La cédula es obligatoria</small>
        <small *ngIf="cedula.errors?.['pattern']">Debe tener exactamente 9 dígitos numéricos</small>
      </div>

      <label for="nombre">Nombre</label>
      <input type="text" id="nombre" name="nombre" [(ngModel)]="form.nombre" #nombre="ngModel" required
        (input)="soloLetras($event)" />
      <div *ngIf="nombre.invalid && nombre.touched" class="error">
        <small>El nombre es obligatorio</small>
      </div>

      <label for="apellidos">Apellidos</label>
      <input type="text" id="apellidos" name="apellidos" [(ngModel)]="form.apellidos" #apellidos="ngModel" required
        (input)="soloLetras($event)" />
      <div *ngIf="apellidos.invalid && apellidos.touched" class="error">
        <small>Los apellidos son obligatorios</small>
      </div>

      <label for="direccion">Dirección</label>
      <input type="text" id="direccion" name="direccion" [(ngModel)]="form.direccion" #direccion="ngModel" required
        (input)="formatoDireccion($event)" />
      <div *ngIf="direccion.invalid && direccion.touched" class="error">
        <small>La dirección es obligatoria</small>
      </div>

      <label for="fechaNacimiento">Fecha de nacimiento</label>
      <input type="date" id="fechaNacimiento" name="fechaNacimiento" [(ngModel)]="form.fechaNacimiento"
        #fechaNacimiento="ngModel" [max]="maxDate" required />
      <div *ngIf="fechaNacimiento.invalid && fechaNacimiento.touched" class="error">
        <small *ngIf="fechaNacimiento.errors?.['required']">La fecha de nacimiento es obligatoria</small>
        <small *ngIf="fechaNacimiento.value && fechaNacimiento.value > maxDate">Debe ser una fecha anterior a hoy</small>
      </div>

      <label for="telefono">Teléfono</label>
      <input type="text" id="telefono" name="telefono" [(ngModel)]="form.telefono" #telefono="ngModel" required
        pattern="^[0-9]{8}$" maxlength="8" minlength="8" (input)="soloNumeros($event)" />
      <div *ngIf="telefono.invalid && telefono.touched" class="error">
        <small *ngIf="telefono.errors?.['required']">El teléfono es obligatorio</small>
        <small *ngIf="telefono.errors?.['pattern']">Debe tener 8 dígitos numéricos</small>
      </div>

      <label for="correo">Correo electrónico</label>
      <input type="email" id="correo" name="correo" [(ngModel)]="form.correo" #correo="ngModel" required email />
      <div *ngIf="correo.invalid && correo.touched" class="error">
        <small *ngIf="correo.errors?.['required']">El correo es obligatorio</small>
        <small *ngIf="correo.errors?.['email']">Formato de correo inválido</small>
      </div>

      <label for="password">Contraseña</label>
      <input type="password" id="password" name="password" [(ngModel)]="form.password" #password="ngModel" required
        minlength="8" (input)="validarPasswordTiempoReal()" />
      <div class="password-requisitos">
        <p>Debe contener como mínimo:</p>
        <ul>
          <li [class.ok]="requisitos.mayuscula">Una letra mayúscula</li>
          <li [class.ok]="requisitos.numero">Un número</li>
          <li [class.ok]="requisitos.especial">Un carácter especial</li>
          <li [class.ok]="requisitos.longitud">Ocho caracteres</li>
        </ul>
      </div>
      <div *ngIf="password.invalid && password.touched" class="error">
        <small *ngIf="password.errors?.['required']">La contraseña es obligatoria</small>
      </div>

      <button type="submit" class="btn-register" [disabled]="registroForm.invalid">
        Registrarse
      </button>
    </form>

    <div class="register-footer">
      <small>
        <a routerLink="/" class="login-link">Volver al login</a>
      </small>
    </div>
  </div>
</div>
