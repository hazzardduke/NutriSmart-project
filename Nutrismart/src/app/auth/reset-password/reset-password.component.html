<div class="rp-card" [class.loading]="loading()">
  <div class="brand">
    <img src="assets/images/logontg.png" alt="Nutrition To Go" />
    <h1>Restablecer contraseña</h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <label for="newPassword">Nueva contraseña</label>
    <div class="password-input">
      <input
        id="newPassword"
        [type]="showNew() ? 'text' : 'password'"
        formControlName="newPassword"
        autocomplete="new-password"
        placeholder="Nueva contraseña"
        (input)="validarPasswordTiempoReal()" />
      <button type="button" class="toggle" (click)="toggle('new')">
        {{ showNew() ? 'Ocultar' : 'Mostrar' }}
      </button>
    </div>

    <div class="password-requisitos">
      <p>Debe contener como mínimo:</p>
      <ul>
        <li [class.ok]="requisitos().mayuscula">Una letra mayúscula</li>
        <li [class.ok]="requisitos().numero">Un número</li>
        <li [class.ok]="requisitos().especial">Un carácter especial</li>
        <li [class.ok]="requisitos().longitud">Ocho caracteres</li>
      </ul>
    </div>

    <label for="confirm">Confirmar nueva contraseña</label>
    <div class="password-input">
      <input
        id="confirm"
        [type]="showConfirm() ? 'text' : 'password'"
        formControlName="confirm"
        autocomplete="new-password"
        placeholder="Confirmar nueva contraseña" />
      <button type="button" class="toggle" (click)="toggle('confirm')">
        {{ showConfirm() ? 'Ocultar' : 'Mostrar' }}
      </button>
    </div>

    <small class="error" *ngIf="mismatch()">Las contraseñas no coinciden.</small>

    <button class="btn-primary" type="submit" [disabled]="form.invalid || loading()">
      {{ loading() ? 'Actualizando…' : 'Guardar contraseña' }}
    </button>
  </form>

  <div class="overlay" *ngIf="loading()">
    <div class="spinner"></div>
  </div>
</div>
